

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sphinx-generated Github Page &mdash; PurdueCAM2Project/CAM2WebUI 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Travis CI Setup" href="travis.html" />
    <link rel="prev" title="Selenium Test Environment" href="selenium.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PurdueCAM2Project/CAM2WebUI
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Basic Setup</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="git.html">Git and GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="heroku.html">Heroku</a></li>
<li class="toctree-l1"><a class="reference internal" href="localsite.html">Viewing Website Locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="selenium.html">Selenium Test Environment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Sphinx-generated Github Page</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#environment-setup">Environment Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sphinx-configuration">Sphinx Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-documentation">Write Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#locally-view-documentation">Locally View Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploy-to-github-page">Deploy to Github Page</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="travis.html">Travis CI Setup</a></li>
</ul>
<p class="caption"><span class="caption-text">Implementation Details</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../implementationDetail/User.html">User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementationDetail/GoogleFusionTable.html">Google Fusion Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementationDetail/CameraPopUpView.html">Camera Pop Up View</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementationDetail/Email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementationDetail/Admin.html">Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementationDetail/AppList.html">App List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementationDetail/load_latlngJSON.html">load_latlngJSON</a></li>
</ul>
<p class="caption"><span class="caption-text">Test Setup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../test/test.html">Django Selenium test</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PurdueCAM2Project/CAM2WebUI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Sphinx-generated Github Page</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/basicSetup/sphinx.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sphinx-generated-github-page">
<h1>Sphinx-generated Github Page<a class="headerlink" href="#sphinx-generated-github-page" title="Permalink to this headline">¶</a></h1>
<p>This page will give a tutorial of creating Github page with sphinx supporting both <em>reStructuredText</em> and <em>MarkDown</em> markup language. See <a class="reference external" href="http://www.sphinx-doc.org">Sphinx Official Website</a> for more detail about Sphinx</p>
<div class="section" id="environment-setup">
<h2>Environment Setup<a class="headerlink" href="#environment-setup" title="Permalink to this headline">¶</a></h2>
<p>Sphinx is a python based tool, all relevant installation will go through <code class="code docutils literal"><span class="pre">pip</span></code>. In general, we need to install sphinx core, a sphinx theme, and a <em>MarkDown</em> parser:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install <span class="nv">sphinx</span><span class="o">==</span><span class="m">1</span>.5.6
$ pip install sphinx_rtd_theme
$ pip install recommonmark
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">since <code class="code docutils literal"><span class="pre">recommonmark</span></code> MarkDown parser has a poor support with sphinx 1.6+. Use sphinx 1.5+ before <code class="code docutils literal"><span class="pre">recommonmark</span></code> support sphinx 1.6+</p>
</div>
<p>A recommended way to install these packages is putting them into a <code class="code docutils literal"><span class="pre">requirements.txt</span></code> under docs folder of project root directory, and execute:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install -r requirements.txt
</pre></div>
</div>
</div>
<div class="section" id="sphinx-configuration">
<h2>Sphinx Configuration<a class="headerlink" href="#sphinx-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="initial-sphinx-set-up">
<h3>Initial Sphinx Set up<a class="headerlink" href="#initial-sphinx-set-up" title="Permalink to this headline">¶</a></h3>
<p>for initial set up of sphinx folders, execute:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sphinx-quickstart
</pre></div>
</div>
<p>this command will guide you initial set up of sphinx document source folder. Most of options can be left default, except a <em>GithubPage</em> option should be set to True. After finishing initial setup, open and modify <code class="code docutils literal"><span class="pre">conf.py</span></code>.</p>
</div>
<div class="section" id="add-build-folder-to-gitignore">
<span id="gitignore"></span><h3>Add build folder to gitignore<a class="headerlink" href="#add-build-folder-to-gitignore" title="Permalink to this headline">¶</a></h3>
<p>After finishing setup, some build folders should be ignored during git commit. By default, these folders are</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># sphinx document build folders</span>
path_to_sphinx_root/_build/
path_to_sphinx_root/_static/
path_to_sphinx_root/_templates/
</pre></div>
</div>
</div>
<div class="section" id="add-sphinx-rtd-theme">
<h3>Add Sphinx RTD theme<a class="headerlink" href="#add-sphinx-rtd-theme" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>import sphinx RTD theme library</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sphinx_rtd_theme</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>set sphinx theme to RTD</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">html_theme</span> <span class="o">=</span> <span class="s2">&quot;sphinx_rtd_theme&quot;</span>
<span class="n">html_theme_path</span> <span class="o">=</span> <span class="p">[</span><span class="n">sphinx_rtd_theme</span><span class="o">.</span><span class="n">get_html_theme_path</span><span class="p">()]</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>set sphinx theme option</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">html_theme_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;display_version&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s1">&#39;navigation_depth&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>for more Sphinx rtd theme settings, see <a class="reference external" href="https://github.com/rtfd/sphinx_rtd_theme">Sphinx rtd github repo</a></p>
</div>
<div class="section" id="add-sphinx-markdown-support">
<h3>Add Sphinx MarkDown Support<a class="headerlink" href="#add-sphinx-markdown-support" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>import markdown parser library</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">recommonmark.parser</span> <span class="kn">import</span> <span class="n">CommonMarkParser</span>
<span class="kn">from</span> <span class="nn">recommonmark.transform</span> <span class="kn">import</span> <span class="n">AutoStructify</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Change <code class="code docutils literal"><span class="pre">source_suffix</span></code> to following to make parser recognize markdown files</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">source_suffix</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.rst&#39;</span><span class="p">,</span> <span class="s1">&#39;.md&#39;</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>add following configuration to make use of markdown parser</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">source_parsers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;.md&#39;</span><span class="p">:</span> <span class="n">CommonMarkParser</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;recommonmark_config&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;enable_eval_rst&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="p">},</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_transform</span><span class="p">(</span><span class="n">AutoStructify</span><span class="p">)</span>
</pre></div>
</div>
<p>if you want to modify setup of recommonmark markdown parser, refer to <a class="reference external" href="https://recommonmark.readthedocs.io/en/latest/">Recommonmark Documentation</a></p>
</div>
<div class="section" id="index-rst-setup">
<h3>Index.rst setup<a class="headerlink" href="#index-rst-setup" title="Permalink to this headline">¶</a></h3>
<p>Although <code class="code docutils literal"><span class="pre">recommonmark</span></code> support sphinx markdown parsing, it still lack of some functionality. One of them is <code class="code docutils literal"><span class="pre">toctree</span></code> which allow you to see documentation structure on the left-hand side of webpage. To enable <code class="code docutils literal"><span class="pre">toctree</span></code>, we need to write index file in <code class="code docutils literal"><span class="pre">rst</span></code> format. The <code class="code docutils literal"><span class="pre">index.rst</span></code> will contain only documentation title (automatically generated during initial setup) and files need to contain in the <code class="code docutils literal"><span class="pre">toctree</span></code> sections. a sample format is as below</p>
<div class="highlight-rst"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:glob:</span>
   <span class="nc">:caption:</span> <span class="nf">section title</span>

   docsFolderName/*
   docFileName1.md
   docFileName2.rst
</pre></div>
</div>
<p>As code sample above, document files can be found with regular express pattern matching. This is accomplished by <code class="code docutils literal"><span class="pre">:glob:</span></code> attribute. It avoids adding document file name to index every time a new file is created, but files that failed in pattern matching still need to be added manually. For more information of how to write <code class="code docutils literal"><span class="pre">toctree</span></code>, see <a class="reference external" href="http://www.sphinx-doc.org/en/stable/markup/toctree.html">Sphinx TOC tree Docs</a></p>
</div>
</div>
<div class="section" id="write-documentation">
<h2>Write Documentation<a class="headerlink" href="#write-documentation" title="Permalink to this headline">¶</a></h2>
<p>Generally, writing <code class="code docutils literal"><span class="pre">rst</span></code> format documents is recommended for sphinx. If you want still using markdown. Following some rules to make sphinx parser generate <code class="code docutils literal"><span class="pre">toctree</span></code> correctly.</p>
<ol class="arabic simple">
<li>Every Document Starts with <code class="code docutils literal"><span class="pre">#</span></code>, a title for this documentation</li>
<li>Use <code class="code docutils literal"><span class="pre">##</span></code> for subsection, use <code class="code docutils literal"><span class="pre">###</span></code> as further section division</li>
<li>If document contains table, you may want to swtich to <code class="code docutils literal"><span class="pre">rst</span></code> (current sphinx markdown parser doesn&#8217;t support table parsing), see <a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickref.html">rst reference</a> to know how to write reStructuredTest Document.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">you may not use github wiki page editor preview to determine which markdown <code class="code docutils literal"><span class="pre">#</span></code> title level you should use, since github will render major <code class="code docutils literal"><span class="pre">#</span></code> header really large.</p>
</div>
<p>After creating a document, make sure your new document file name is in <code class="code docutils literal"><span class="pre">index.rst</span></code> or satisfying any pattern matching in any <code class="code docutils literal"><span class="pre">toctree</span></code> section. Otherwise, readers are not able to navigate to your page (<strong>In order word, your documents are useless</strong>)</p>
</div>
<div class="section" id="locally-view-documentation">
<h2>Locally View Documentation<a class="headerlink" href="#locally-view-documentation" title="Permalink to this headline">¶</a></h2>
<p>Before pushing your documents to repository, viewing them locally to make sure it displays as expected and check no any typo. To do so, simply execute following command in sphinx root directory (not project root directory)</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ make html
</pre></div>
</div>
<p>if you didn&#8217;t change settings during initial setup, a folder named <code class="code docutils literal"><span class="pre">_build</span></code> will show up, inside this folder, there is a <code class="code docutils literal"><span class="pre">html</span></code> folder. Open <code class="code docutils literal"><span class="pre">index.html</span></code> and you should be able to view documentation webpage locally.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When you modify some files and rebuild documentation page, but didn&#8217;t see any changes, clean temperary build files by running</p>
<div class="last highlight-bash"><div class="highlight"><pre><span></span>$ make clean
</pre></div>
</div>
</div>
</div>
<div class="section" id="deploy-to-github-page">
<h2>Deploy to Github Page<a class="headerlink" href="#deploy-to-github-page" title="Permalink to this headline">¶</a></h2>
<p>Since obtaining Sphinx Documentation requires a build step, there are two ways to deploy built sphinx page to Github page. One is using some automatic built services (like Travis-CI) which will automatically build and deploy for you. The other is built locally yourself.</p>
<div class="section" id="deploy-with-travis-ci">
<h3>Deploy with Travis-CI<a class="headerlink" href="#deploy-with-travis-ci" title="Permalink to this headline">¶</a></h3>
<p>Deploy with Travis-CI basically needs 4 steps:</p>
<ol class="arabic simple">
<li>modify <code class="code docutils literal"><span class="pre">.travis.yml</span></code> configuration by adding the following (only works in python environment). For more information about travis github page deployment, see <a class="reference external" href="https://docs.travis-ci.com/user/deployment/pages/">Travis Configuration</a></li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>install:            <span class="c1"># Install requirement as &quot;Environment Setup Section&quot;</span>
- pip install -r sphinx_root/requirements.txt
script:             <span class="c1"># build sphinx document</span>
- <span class="nb">cd</span> sphinx_root/
- make html
- <span class="nb">cd</span> -
deploy              <span class="c1"># deploy to github page</span>
- provider: pages
  skip_cleanup: <span class="nb">true</span>
  local_dir: sphinx_root/_build/html
  github_token: <span class="nv">$GITHUB_TOKEN</span> <span class="c1"># Set in travis-ci.org dashboard</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Obtain Github personal token.
This Token can be anyone who has access right to Repository. To obtain this token, Go to personal Github settings, At very end of left column, click <em>personal access tokens</em> and create a new one. With regards to Scope option during token creation, only <code class="code docutils literal"><span class="pre">public_repo</span></code> should be selected for safety.  Put this token in Travis-CI environment variable settings with name corresponding to travis script</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whoever use their own <em>personal access token</em>, every auto deployment commit will be treated as their commit. For a team, it&#8217;s recommended to use tokens from organization</p>
</div>
<ol class="arabic simple" start="3">
<li>Change repository settings
repository manager should change github page source to branch <code class="code docutils literal"><span class="pre">gh-pages</span></code> branch. This branch will be created during auto deployment by default.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="code docutils literal"><span class="pre">gh-pages</span></code> branch can&#8217;t be a protected branch, otherwise, Travis-CI won&#8217;t be able to push to repository.</p>
</div>
</div>
<div class="section" id="locally-built-and-deploy-by-push">
<h3>Locally built and deploy by push<a class="headerlink" href="#locally-built-and-deploy-by-push" title="Permalink to this headline">¶</a></h3>
<p>Deploy by github push needs 6 steps:</p>
<ol class="arabic simple">
<li>create a <code class="code docutils literal"><span class="pre">source</span></code> directory inside docs folder of repo root directory and move everything in sphinx root to new folder</li>
<li>allow git to track sphinx temp file by removing these lines shown <a class="reference internal" href="#gitignore">gitignore</a> section</li>
<li>Change Sphinx build path to parent directory of sphinx root directory by changing two lines in <code class="code docutils literal"><span class="pre">Makefile</span></code> and <code class="code docutils literal"><span class="pre">make.bat</span></code>:</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># in Makefile</span>
<span class="nv">BUILDDIR</span><span class="o">=</span>_build        -&gt;       <span class="nv">BUILDDIR</span><span class="o">=</span>..
<span class="c1"># in make.bat</span>
<span class="nb">set</span> <span class="nv">BUILDDIR</span><span class="o">=</span>_build    -&gt;       <span class="nb">set</span> <span class="nv">BUILDDIR</span><span class="o">=</span>..
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>execute following command to move files to docs folder in <em>root docs directory</em></li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mv html/* ./
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>if this command reports error, there are several possibilities:</p>
<ol class="last arabic simple">
<li>didn&#8217;t build document with <code class="code docutils literal"><span class="pre">make</span> <span class="pre">html</span></code></li>
<li>execute in wrong directory.</li>
<li>may need to clean the <em>root docs directory</em>, only leave <em>source</em> folder there and <em>html</em> folder there</li>
</ol>
</div>
<ol class="arabic simple" start="5">
<li>commit every change in docs folder and push it to github</li>
<li>(only needs to be done once) change github repo github page settings, make source to be <em>master branch /docs folder</em></li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="travis.html" class="btn btn-neutral float-right" title="Travis CI Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="selenium.html" class="btn btn-neutral" title="Selenium Test Environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Purdue CAM2 Project Developers.
      Last updated on Sep 13, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>